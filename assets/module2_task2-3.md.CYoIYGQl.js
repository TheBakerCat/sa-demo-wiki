import{_ as i,o as a,c as e,ai as t}from"./chunks/framework.B8DQqJnJ.js";const g=JSON.parse('{"title":"3. Настройте сервер сетевой файловой системы (nfs) на HQ-SRV:","description":"","frontmatter":{},"headers":[],"relativePath":"module2/task2-3.md","filePath":"module2/task2-3.md"}'),n={name:"module2/task2-3.md"};function l(p,s,h,d,r,o){return a(),e("div",null,[...s[0]||(s[0]=[t('<h1 id="_3-настроите-сервер-сетевои-фаиловои-системы-nfs-на-hq-srv" tabindex="-1">3. Настройте сервер сетевой файловой системы (nfs) на HQ-SRV: <a class="header-anchor" href="#_3-настроите-сервер-сетевои-фаиловои-системы-nfs-на-hq-srv" aria-label="Permalink to “3. Настройте сервер сетевой файловой системы (nfs) на HQ-SRV:”">​</a></h1><details class="details custom-block"><summary>Задания</summary><p>• В качестве папки общего доступа выберите /raid/nfs, доступ для чтения и записи исключительно для сети в сторону HQ-CLI</p><p>• На HQ-CLI настройте автомонтирование в папку /mnt/nfs</p><p>• Основные параметры сервера отметьте в отчёте</p></details><h2 id="_1-поднятие-nfs" tabindex="-1">1. Поднятие NFS <a class="header-anchor" href="#_1-поднятие-nfs" aria-label="Permalink to “1. Поднятие NFS”">​</a></h2><p>Устанавливаем необходимые пакеты</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>apt-get install nfs-server nfs-utils</span></span></code></pre></div><p>Создаем папку общего доступа /raid/nfs</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>mkdir /raid/nfs</span></span></code></pre></div><p>Задаем права на общую папку</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>chmod -R 777 /raid/nfs</span></span></code></pre></div><p>Заходим в файл /etc/exports</p><p>Создаем шару из каталога /raid/nfs, которая будет доступна сети в сторону HQ-CLI 192.168.2.0/28</p><p>Добавим в него строку</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>/raid/nfs 192.168.200.0/28(rw,no_root_squash)</span></span></code></pre></div><p>Где:</p><p>/raid/nfs – общая сетевая папка</p><p>192.168.200.0/28 – сеть в сторону HQ-CLI</p><p>rw – разрешить чтение и запись.</p><p>no_root_squash – отключение ограничения root прав.</p><p>Выполняем экспорт данных</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>exportfs -arv</span></span></code></pre></div><p>Добавляем в автозагрузку и запускаем NFS сервер</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>systemctl enable --now nfs-server.service</span></span></code></pre></div><h2 id="_2-подключение-клиента-к-серверу" tabindex="-1">2. Подключение клиента к серверу <a class="header-anchor" href="#_2-подключение-клиента-к-серверу" aria-label="Permalink to “2. Подключение клиента к серверу”">​</a></h2><p>На HQ-CLI устанавливаем (если не установлен) компонент для клиентской части NFS</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>apt-get install nfs-client nfs-utils</span></span></code></pre></div><p>Создаем директорию для автомонтирования /mnt/nfs</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>mkdir /mnt/nfs</span></span></code></pre></div><p>Задаём права на директорию /mnt/nfs</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>chmod –R 777 /mnt/nfs</span></span></code></pre></div><p>Открываем файл /etc/fstab И добавляем строку</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>192.168.100.2:/raid/nfs /mnt/nfs nfs auto 0 0</span></span></code></pre></div><p>Где:</p><p>192.168.100.2 — адрес сервера NFS</p><p>/mnt/nfs — каталог, куда будет примонтирована шара.</p><p>Производим монтирование общего ресурса</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>mount -a</span></span></code></pre></div>',36)])])}const k=i(n,[["render",l]]);export{g as __pageData,k as default};
