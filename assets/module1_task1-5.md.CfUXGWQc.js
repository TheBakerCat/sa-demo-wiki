import{_ as i,o as a,c as e,ai as l}from"./chunks/framework.B8DQqJnJ.js";const k=JSON.parse('{"title":"5. Настройте безопасный удаленный доступ на серверах HQ-SRV и BR-SRV:","description":"","frontmatter":{},"headers":[],"relativePath":"module1/task1-5.md","filePath":"module1/task1-5.md"}'),n={name:"module1/task1-5.md"};function t(h,s,r,p,d,o){return a(),e("div",null,[...s[0]||(s[0]=[l(`<h1 id="_5-настроите-безопасныи-удаленныи-доступ-на-серверах-hq-srv-и-br-srv" tabindex="-1">5. Настройте безопасный удаленный доступ на серверах HQ-SRV и BR-SRV: <a class="header-anchor" href="#_5-настроите-безопасныи-удаленныи-доступ-на-серверах-hq-srv-и-br-srv" aria-label="Permalink to “5. Настройте безопасный удаленный доступ на серверах HQ-SRV и BR-SRV:”">​</a></h1><details class="details custom-block"><summary>Details</summary><p>• Для подключения используйте порт 2026</p><p>• Разрешите подключения исключительно пользователю sshuser</p><p>• Ограничьте количество попыток входа до двух</p><p>• Настройте баннер «Authorized access only».</p></details><p>Установка ssh сервера:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openssh-server</span></span></code></pre></div><h2 id="_1-1-настроика-подключения-с-порта-2026" tabindex="-1">1.1 Настройка подключения с порта 2026 <a class="header-anchor" href="#_1-1-настроика-подключения-с-порта-2026" aria-label="Permalink to “1.1 Настройка подключения с порта 2026”">​</a></h2><p>Найдите строчку <code>port 22</code> раскомментируйте и измените на нужный <code>port 2026</code> Редактируем файл по пути <code>/etc/openssh/sshd_config</code> на хосте <code>HQ-SRV</code></p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark has-diff" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#port 22 </span></span>
<span class="line diff remove add"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2026</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_1-2-разрешите-подключения-исключительно-пользователю-sshuser" tabindex="-1">1.2 Разрешите подключения исключительно пользователю sshuser <a class="header-anchor" href="#_1-2-разрешите-подключения-исключительно-пользователю-sshuser" aria-label="Permalink to “1.2 Разрешите подключения исключительно пользователю sshuser”">​</a></h2><p>Прописываем строчку <code>AllowUsers sshuser</code> в файле <code>/etc/openssh/sshd_config</code> на хосте <code>HQ-SRV</code></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AllowUsers</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sshuser</span></span></code></pre></div><h2 id="_1-3-ограничьте-количество-попыток-входа-до-двух" tabindex="-1">1.3 Ограничьте количество попыток входа до двух <a class="header-anchor" href="#_1-3-ограничьте-количество-попыток-входа-до-двух" aria-label="Permalink to “1.3 Ограничьте количество попыток входа до двух”">​</a></h2><p>Для ограничения попыток ввода пароля нужно найти строчку с <code>#MaxAuthTries 6</code> в файле <code>/etc/openssh/sshd_config</code> на хосте <code>HQ-SRV</code> раскомментировать и изменить значение</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark has-diff" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#MaxAuthTries 6 </span></span>
<span class="line diff remove add"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MaxAuthTries </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_1-4-настроите-баннер-«authorized-access-only»" tabindex="-1">1.4 Настройте баннер «Authorized access only». <a class="header-anchor" href="#_1-4-настроите-баннер-«authorized-access-only»" aria-label="Permalink to “1.4 Настройте баннер «Authorized access only».”">​</a></h2><p>Для настройки баннера найдите в rонфигурационном файле строчку <code>#Banner</code> раскомментируйте и пропишите путь к файлу <code>/root/banner</code>, где будет лежать «Authorized access only»</p><p>Создаем файл banner</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/banner</span></span></code></pre></div><p>Используя текстовый редактор прописываем Authorized access only</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/banner</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Authorized</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> only</span></span></code></pre></div><p>Для проверки попробуйте с HQ-RTR подключиться по ssh <a href="mailto:sshuser@192.168.100.2" target="_blank" rel="noreferrer">sshuser@192.168.100.2</a></p><p><strong>Повторите те же действия на машине BR-SRV по аналогии</strong></p><p>Полезные материалы:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>https://www.altlinux.org/SSH</span></span></code></pre></div>`,23)])])}const g=i(n,[["render",t]]);export{k as __pageData,g as default};
