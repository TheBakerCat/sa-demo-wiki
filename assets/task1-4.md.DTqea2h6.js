import{_ as i,o as a,c as e,ai as t}from"./chunks/framework.B8DQqJnJ.js";const r=JSON.parse('{"title":"4. Настройте коммутацию в сегменте HQ следующим образом:","description":"","frontmatter":{},"headers":[],"relativePath":"task1-4.md","filePath":"task1-4.md"}'),n={name:"task1-4.md"};function l(p,s,h,d,o,c){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="_4-настроите-коммутацию-в-сегменте-hq-следующим-образом" tabindex="-1">4. Настройте коммутацию в сегменте HQ следующим образом: <a class="header-anchor" href="#_4-настроите-коммутацию-в-сегменте-hq-следующим-образом" aria-label="Permalink to “4. Настройте коммутацию в сегменте HQ следующим образом:”">​</a></h1><p>• Трафик HQ-SRV должен принадлежать VLAN 100</p><p>• Трафик HQ-CLI должен принадлежать VLAN 200</p><p>• Предусмотреть возможность передачи трафика управления в VLAN 999</p><p>• Реализовать на HQ-RTR маршрутизацию трафика всех указанных VLAN</p><p>с использованием одного сетевого адаптера ВМ/физического порта</p><p>• Сведения о настройке коммутации внесите в отчёт</p><h2 id="_4-1-создание-vlan" tabindex="-1">4.1 Создание Vlan <a class="header-anchor" href="#_4-1-создание-vlan" aria-label="Permalink to “4.1 Создание Vlan”">​</a></h2><p>HQ-SW/options</p><p>options</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>TYPE=ovsbr</span></span></code></pre></div><p>vlan</p><p>options</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>TYPE=ovsport</span></span>
<span class="line"><span>BRIDGE=HQ-SW</span></span>
<span class="line"><span>VID=100 или 200 или 999</span></span>
<span class="line"><span>BOOTPROTO=static</span></span></code></pre></div><p>ipv4address</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>192.168.&quot;номер vlan&quot;.&quot;номер машины&quot;/&quot;маска по заданию&quot;</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>systemctl restart network</span></span></code></pre></div><h2 id="_4-2настроика-openvswitch" tabindex="-1">4.2Настройка openvswitch <a class="header-anchor" href="#_4-2настроика-openvswitch" aria-label="Permalink to “4.2Настройка openvswitch”">​</a></h2><p>Установка openvswitch</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>apt-get update &amp;&amp; apt-get install openvswitch</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>systemctl enable --now openvswitch</span></span></code></pre></div><p>идем к файлу /etc/net/iface/default/options и находим строчку OVS_REMOVE=yes и меняем yes на no</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>echo &quot;8021q&quot; | tee -a /etc/modules</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>ovs-vsctl add-port HQ-SW &quot;интерфейс&quot; trunk=100,200,999</span></span></code></pre></div><p>для проверки используем:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>ovs-vsctl show</span></span></code></pre></div><p>Проверка работаспособности</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>ping ya.ru -I &quot;ip адрес vlan&quot;</span></span></code></pre></div><p>Если есть ping, значит серверная часть сделана правильно.</p><p>переходим на клиентскую систему</p><p>создаем директории для vlan пример ens18.100 для ускорения конфигурации можно скопировать конфиг из ens18</p><p>options</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>TYPE=vlan</span></span>
<span class="line"><span>VID=100 или 200</span></span>
<span class="line"><span>HOST=&quot;интерфейс, который ведет к серверу&quot;</span></span>
<span class="line"><span>BOOTPROTO=static</span></span>
<span class="line"><span>CONFIG_IPV4=yes</span></span></code></pre></div><p>ipv4address</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>192.168.&quot;номер vlan&quot;.&quot;номер машины&quot;/&quot;маска по заданию&quot;</span></span></code></pre></div><p>ipv4route</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>default via &quot;ip адрес нужного vlan на стороне openvswitch&quot;</span></span></code></pre></div><p>resolv.conf</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>nameserver 8.8.8.8</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>systemctl restart network</span></span></code></pre></div><p>Проверяем:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>ping ya.ru</span></span></code></pre></div><p>создаем директории для vlan пример ens18.100 для ускорения конфигурации можно скопировать конфиг из ens18</p><p>options</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>TYPE=vlan</span></span>
<span class="line"><span>VID=100 или 200</span></span>
<span class="line"><span>HOST=&quot;интерфейс, который ведет к серверу&quot;</span></span>
<span class="line"><span>BOOTPROTO=static</span></span>
<span class="line"><span>CONFIG_IPV4=yes</span></span></code></pre></div><p>ipv4address</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>192.168.&quot;номер vlan&quot;.&quot;номер машины&quot;/&quot;маска по заданию&quot;</span></span></code></pre></div><p>ipv4route</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>default via &quot;ip адрес нужного vlan на стороне openvswitch&quot;</span></span></code></pre></div><p>resolv.conf</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>nameserver 8.8.8.8</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>systemctl restart network</span></span></code></pre></div><p>Проверяем:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>ping ya.ru</span></span></code></pre></div>`,54)])])}const k=i(n,[["render",l]]);export{r as __pageData,k as default};
