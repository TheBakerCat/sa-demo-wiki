import{_ as i,o as a,c as e,ai as t}from"./chunks/framework.B8DQqJnJ.js";const g=JSON.parse('{"title":"7. Обеспечьте динамическую маршрутизацию на маршрутизаторах HQRTR и BR-RTR:","description":"","frontmatter":{},"headers":[],"relativePath":"task1-7.md","filePath":"task1-7.md"}'),n={name:"task1-7.md"};function l(p,s,h,o,d,c){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="_7-обеспечьте-динамическую-маршрутизацию-на-маршрутизаторах-hqrtr-и-br-rtr" tabindex="-1">7. Обеспечьте динамическую маршрутизацию на маршрутизаторах HQRTR и BR-RTR: <a class="header-anchor" href="#_7-обеспечьте-динамическую-маршрутизацию-на-маршрутизаторах-hqrtr-и-br-rtr" aria-label="Permalink to “7. Обеспечьте динамическую маршрутизацию на маршрутизаторах HQRTR и BR-RTR:”">​</a></h1><p>Cети одного офиса должны быть доступны из другого офиса и наоборот. Для обеспечения динамической маршрутизации используйте link state протокол на усмотрение участника:</p><p>• Разрешите выбранный протокол только на интерфейсах ip туннеля</p><p>• Маршрутизаторы должны делиться маршрутами только друг с другом</p><p>• Обеспечьте защиту выбранного протокола посредством парольной защиты</p><p>• Сведения о настройке и защите протокола занесите в отчёт.</p><h2 id="_7-1-настроика-openvswitch" tabindex="-1">7.1 Настройка openvswitch <a class="header-anchor" href="#_7-1-настроика-openvswitch" aria-label="Permalink to “7.1 Настройка openvswitch”">​</a></h2><p>Установка openvswitch</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>apt-get update &amp;&amp; apt-get install openvswitch</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>systemctl enable --now openvswitch</span></span></code></pre></div><p>идем к файлу /etc/net/iface/default/options и находим строчку OVS_REMOVE=yes и меняем yes на no</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>echo &quot;8021q&quot; | tee -a /etc/modules</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>ovs-vsctl add-port HQ-SW &quot;интерфейс&quot; trunk=100,200,999</span></span></code></pre></div><p>для проверки используем:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>ovs-vsctl show</span></span></code></pre></div><p>Проверка работаспособности</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>ping ya.ru -I &quot;ip адрес vlan&quot;</span></span></code></pre></div><p>Если есть ping, значит серверная часть сделана правильно.</p><p>переходим на клиентскую систему</p><p>создаем директории для vlan пример ens18.100 для ускорения конфигурации можно скопировать конфиг из ens18</p><p>options</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>TYPE=vlan</span></span>
<span class="line"><span>VID=100 или 200</span></span>
<span class="line"><span>HOST=&quot;интерфейс, который ведет к серверу&quot;</span></span>
<span class="line"><span>BOOTPROTO=static</span></span>
<span class="line"><span>CONFIG_IPV4=yes</span></span></code></pre></div><p>ipv4address</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>192.168.&quot;номер vlan&quot;.&quot;номер машины&quot;/&quot;маска по заданию&quot;</span></span></code></pre></div><p>ipv4route</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>default via &quot;ip адрес нужного vlan на стороне openvswitch&quot;</span></span></code></pre></div><p>resolv.conf</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>nameserver 8.8.8.8</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>systemctl restart network</span></span></code></pre></div><p>Проверяем:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>ping ya.ru</span></span></code></pre></div>`,31)])])}const k=i(n,[["render",l]]);export{g as __pageData,k as default};
