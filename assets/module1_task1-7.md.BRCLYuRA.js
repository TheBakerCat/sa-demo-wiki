import{_ as i,o as a,c as e,ai as t}from"./chunks/framework.B8DQqJnJ.js";const o=JSON.parse('{"title":"7. Обеспечьте динамическую маршрутизацию на маршрутизаторах HQRTR и BR-RTR:","description":"","frontmatter":{},"headers":[],"relativePath":"module1/task1-7.md","filePath":"module1/task1-7.md"}'),l={name:"module1/task1-7.md"};function h(n,s,p,k,d,r){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="_7-обеспечьте-динамическую-маршрутизацию-на-маршрутизаторах-hqrtr-и-br-rtr" tabindex="-1">7. Обеспечьте динамическую маршрутизацию на маршрутизаторах HQRTR и BR-RTR: <a class="header-anchor" href="#_7-обеспечьте-динамическую-маршрутизацию-на-маршрутизаторах-hqrtr-и-br-rtr" aria-label="Permalink to “7. Обеспечьте динамическую маршрутизацию на маршрутизаторах HQRTR и BR-RTR:”">​</a></h1><p>Cети одного офиса должны быть доступны из другого офиса и наоборот. Для обеспечения динамической маршрутизации используйте link state протокол на усмотрение участника:</p><details class="details custom-block"><summary>Details</summary><p>• Разрешите выбранный протокол только на интерфейсах ip туннеля</p><p>• Маршрутизаторы должны делиться маршрутами только друг с другом</p><p>• Обеспечьте защиту выбранного протокола посредством парольной защиты</p><p>• Сведения о настройке и защите протокола занесите в отчёт.</p></details><p>Установка</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ffr</span></span></code></pre></div><h2 id="_7-1-настроика-ffr-ospf" tabindex="-1">7.1 Настройка ffr (ospf) <a class="header-anchor" href="#_7-1-настроика-ffr-ospf" aria-label="Permalink to “7.1 Настройка ffr (ospf)”">​</a></h2><p>В файле <code>/etc/frr/daemons</code> находим строчку <code>ospfd=no</code> и меняем ее на <code>ospfd=yes</code></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark has-diff" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#/etc/frr/daemons</span></span>
<span class="line"></span>
<span class="line diff remove"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ospfd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">no</span></span>
<span class="line diff add"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ospfd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">yes</span></span></code></pre></div><p>Запускаем и ставим на автозагрузку frr</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> frr</span></span></code></pre></div><p>Заходим в терминал управления frr - vtysh (Расшифровываетсья как Virtual TeletYpe SHell)</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vtysh</span></span></code></pre></div><p>Переходим в режим конфигурации</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> t</span></span></code></pre></div><p>Переходим в режим конфигурации виртуального роутера ospf</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">router</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ospf</span></span></code></pre></div><p>На HQ-RTR прописываем:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ospf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> router-id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.1.1.1</span></span></code></pre></div><p>На BR-RTR прописываем:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ospf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> router-id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2.2.2.2</span></span></code></pre></div><p>Далее на всех интерфейсах, кроме <code>GRE1</code> прописываем значение <code>passives</code>, на самом <code>GRE1</code> прописываем <code>point-to-point</code>:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">int</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;интерфейс&quot;</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ospf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> passive</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">int</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;GRE&quot;</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ospf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> point-to-point</span></span></code></pre></div><p>Прописываем сети, которые будут работать в GRE1</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;интерфейс GRE с вашей стороны вместе с маской&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> area</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ip сети vlan 100 вместе с маской&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> area</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ip сети vlan 200 вместе с маской&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> area</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ip сети vlan 999 вместе с маской&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> area</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>do wr</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>end</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>exit</span></span></code></pre></div>`,30)])])}const c=i(l,[["render",h]]);export{o as __pageData,c as default};
