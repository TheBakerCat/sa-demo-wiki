import{_ as i,o as a,c as e,ai as t}from"./chunks/framework.B8DQqJnJ.js";const g=JSON.parse('{"title":"2. Настройте доступ к сети Интернет, на маршрутизаторе ISP:","description":"","frontmatter":{},"headers":[],"relativePath":"task1-2.md","filePath":"task1-2.md"}'),l={name:"task1-2.md"};function n(p,s,h,d,r,c){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="_2-настроите-доступ-к-сети-интернет-на-маршрутизаторе-isp" tabindex="-1">2. Настройте доступ к сети Интернет, на маршрутизаторе ISP: <a class="header-anchor" href="#_2-настроите-доступ-к-сети-интернет-на-маршрутизаторе-isp" aria-label="Permalink to “2. Настройте доступ к сети Интернет, на маршрутизаторе ISP:”">​</a></h1><p>Настройте адресацию на интерфейсах:</p><p>• Интерфейс, подключенный к магистральному провайдеру, получает адрес по DHCP</p><p>• Настройте маршрут по умолчанию, если это необходимо</p><p>• Настройте интерфейс, в сторону HQ-RTR, интерфейс подключен к сети 172.16.1.0/28</p><p>• Настройте интерфейс, в сторону BR-RTR, интерфейс подключен к сети 172.16.2.0/28</p><p>• На ISP настройте динамическую сетевую трансляцию портов для доступа к сети Интернет HQ-RTR и BR-RTR.</p><h2 id="_2-1-создание-и-настроикаинтерфеисов" tabindex="-1">2.1 Создание и настройкаинтерфейсов <a class="header-anchor" href="#_2-1-создание-и-настроикаинтерфеисов" aria-label="Permalink to “2.1 Создание и настройкаинтерфейсов”">​</a></h2><p>В директории /etc/net/iface создаем или копируем, если уже существует интерфейс</p><p>Переходим в созданную директорию создаем файлы:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>touch options ipv4address ipv4route resolv.conf</span></span></code></pre></div><p>options</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>BOOTPROTO=static</span></span>
<span class="line"><span>TYPE=eth</span></span>
<span class="line"><span>CONFIG_IPV4=yes</span></span>
<span class="line"><span>CONFIG_WIRELESS=no</span></span>
<span class="line"><span>DISABLED=no</span></span></code></pre></div><p>ipv4address</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>ip адрес интерфейса, например 172.16.1.0/28 для HQ-RTR и 172.16.2.0/28 для BR-RTR</span></span></code></pre></div><p>ipv4route</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>ip адрес шлюза по умолчанию, куда должен вести интерфейс (маску писать не надо)</span></span></code></pre></div><p>resolv.conf</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>nameserver 8.8.8.8</span></span></code></pre></div><p>(Существуют и другие dns сервера, если хотите можете вписать ниже)</p><h2 id="_2-2-настроика-nat" tabindex="-1">2.2 Настройка NAT <a class="header-anchor" href="#_2-2-настроика-nat" aria-label="Permalink to “2.2 Настройка NAT”">​</a></h2><p>Устанавливаем iptables</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>apt-get install iptables</span></span></code></pre></div><p>Ставим его на автозагрузку через</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>systemctl enable iptables</span></span></code></pre></div><p>Настраиваем iptables</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>iptables -t nat -A POSTROUTING -o &quot;интерфейс который направлен в интернет, обычно ens18&quot; -j MASQUERADE</span></span></code></pre></div><p>Сохраняем настройки</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>iptables-save &gt;&gt; /etc/sysconfig/iptables</span></span></code></pre></div><p>Перезапускаем демон iptables, чтоб применить настройки</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>systemctl restart iptables.</span></span></code></pre></div>`,31)])])}const k=i(l,[["render",n]]);export{g as __pageData,k as default};
