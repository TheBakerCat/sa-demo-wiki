# 3. Настройте сервер сетевой файловой системы (nfs) на HQ-SRV:

::: details Задания

• В качестве папки общего доступа выберите /raid/nfs, доступ для чтения
и записи исключительно для сети в сторону HQ-CLI

• На HQ-CLI настройте автомонтирование в папку /mnt/nfs

• Основные параметры сервера отметьте в отчёте

::: 

## 1. Поднятие NFS

Устанавливаем необходимые пакеты

```
apt-get install nfs-server nfs-utils
```

Создаем папку общего доступа /raid/nfs

```
mkdir /raid/nfs
```

Задаем права на общую папку

```
chmod -R 777 /raid/nfs
```

Заходим в файл /etc/exports

Создаем шару из каталога /raid/nfs, которая будет доступна сети в сторону HQ-CLI 192.168.2.0/28

Добавим в него строку
```
/raid/nfs 192.168.200.0/28(rw,no_root_squash)
```
Где:

/raid/nfs – общая сетевая папка

192.168.200.0/28 – сеть в сторону HQ-CLI

rw – разрешить чтение и запись.

no_root_squash – отключение ограничения root прав.


Выполняем экспорт данных
```
exportfs -arv
```

Добавляем в автозагрузку и запускаем NFS сервер

```
systemctl enable --now nfs-server.service
```
## 2. Подключение клиента к серверу
На HQ-CLI устанавливаем (если не установлен) компонент для клиентской части NFS

```
apt-get install nfs-client nfs-utils
```

Создаем директорию для автомонтирования /mnt/nfs

```
mkdir /mnt/nfs
```

Задаём права на директорию /mnt/nfs

```
chmod –R 777 /mnt/nfs
```

Открываем файл /etc/fstab
И добавляем строку

```
192.168.100.2:/raid/nfs /mnt/nfs nfs auto 0 0
```

Где:

192.168.100.2 — адрес сервера NFS

/mnt/nfs — каталог, куда будет примонтирована шара.

Производим монтирование общего ресурса

```
mount -a
```
